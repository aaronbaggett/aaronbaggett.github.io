!function(e){"use strict";function t(){var e,t,n,r=navigator.userAgent,s=navigator.appName,o=""+parseFloat(navigator.appVersion),i=parseInt(navigator.appVersion,10);return-1!==navigator.appVersion.indexOf("Windows NT")&&-1!==navigator.appVersion.indexOf("rv:11")?(s="IE",o="11;"):-1!==(t=r.indexOf("MSIE"))?(s="IE",o=r.substring(t+5)):-1!==(t=r.indexOf("Chrome"))?(s="Chrome",o=r.substring(t+7)):-1!==(t=r.indexOf("Safari"))?(s="Safari",o=r.substring(t+7),-1!==(t=r.indexOf("Version"))&&(o=r.substring(t+8))):-1!==(t=r.indexOf("Firefox"))?(s="Firefox",o=r.substring(t+8)):(e=r.lastIndexOf(" ")+1)<(t=r.lastIndexOf("/"))&&(s=r.substring(e,t),o=r.substring(t+1),s.toLowerCase()==s.toUpperCase()&&(s=navigator.appName)),-1!==(n=o.indexOf(";"))&&(o=o.substring(0,n)),-1!==(n=o.indexOf(" "))&&(o=o.substring(0,n)),i=parseInt(""+o,10),isNaN(i)&&(o=""+parseFloat(navigator.appVersion),i=parseInt(navigator.appVersion,10)),[s,i]}function n(e,t,n){return e.replace(new RegExp(t.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1"),"g"),n)}function r(e,t){e.length||(e=[e]);for(var n=e.length-1;n>=0;n--){var r=n>0?t.cloneNode(!0):t,s=e[n],o=s.parentNode,i=s.nextSibling;r.appendChild(s),i?o.insertBefore(r,i):o.appendChild(r)}}function s(e,t,n){if(e)if(e.classList)e.classList[n?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(/\s+/g," ").replace(" "+t+" ","");e.className=r+(n?" "+t:"")}}function o(e,t,n){e.addEventListener(t,n,!1)}function i(e){var t=l().isFullScreen()?{x:0,y:0}:a(e.currentTarget);return{x:e.clientX-t.x,y:e.clientY-t.y}}function a(e){for(var t=0,n=0;e;)t+=e.offsetLeft-e.scrollLeft+e.clientLeft,n+=e.offsetTop-e.scrollTop+e.clientTop,e=e.offsetParent;return{x:t,y:n}}function c(e,t){for(var n in t)t[n]&&t[n].constructor&&t[n].constructor===Object?(e[n]=e[n]||{},c(e[n],t[n])):e[n]=t[n];return e}function l(){var e={supportsFullScreen:!1,isFullScreen:function(){return!1},requestFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",element:null,prefix:""},t="webkit moz o ms khtml".split(" ");if("undefined"!=typeof document.cancelFullScreen)e.supportsFullScreen=!0;else for(var n=0,r=t.length;r>n;n++){if(e.prefix=t[n],"undefined"!=typeof document[e.prefix+"CancelFullScreen"]){e.supportsFullScreen=!0;break}if("undefined"!=typeof document.msExitFullscreen&&document.msFullscreenEnabled){e.prefix="ms",e.supportsFullScreen=!0;break}}return"webkit"===e.prefix&&navigator.userAgent.match(/Version\/[\d\.]+.*Safari/)&&(e.supportsFullScreen=!1),e.supportsFullScreen&&(e.fullScreenEventName=e.prefix+"fullscreenchange",e.isFullScreen=function(){switch(this.prefix){case"":return document.fullScreen;case"webkit":return document.webkitIsFullScreen;case"ms":return null!==document.msFullscreenElement;default:return document[this.prefix+"FullScreen"]}},e.requestFullScreen=function(e){return""===this.prefix?e.requestFullScreen():e[this.prefix+("ms"==this.prefix?"RequestFullscreen":"RequestFullScreen")]("webkit"===this.prefix?e.ALLOW_KEYBOARD_INPUT:null)},e.cancelFullScreen=function(){return""===this.prefix?document.cancelFullScreen():document[this.prefix+("ms"==this.prefix?"ExitFullscreen":"CancelFullScreen")]()},e.element=function(){return""===this.prefix?document.fullscreenElement:document[this.prefix+"FullscreenElement"]}),e}function u(e){function a(){for(j.subcount=0;f(j.captions[j.subcount][0])<j.media.currentTime.toFixed(1);)if(j.subcount++,j.subcount>j.captions.length-1){j.subcount=j.captions.length-1;break}}function c(){s(j.container,p.classes.captions.enabled,!0),p.captions.defaultActive&&(s(j.container,p.classes.captions.active,!0),j.buttons.captions.setAttribute("checked","checked"))}function u(e){var t=[];return t=e.split(" --> "),m(t[0])}function f(e){var t=[];return t=e.split(" --> "),m(t[1])}function m(e){if(null===e||void 0===e)return 0;var t,n=[],r=[];return n=e.split(","),r=n[0].split(":"),t=Math.floor(60*r[0]*60)+Math.floor(60*r[1])+Math.floor(r[2])}function b(e){return j.container.querySelectorAll(e)}function v(e){return b(e)[0]}function g(){p.debug&&console.log("Injecting custom controls");var e=p.html;e=n(e,"{aria-label}",p.playAriaLabel),e=n(e,"{id}",j.random),j.container.insertAdjacentHTML("beforeend",e)}function y(){j.controls=v(p.selectors.controls),j.buttons={},j.buttons.play=v(p.selectors.buttons.play),j.buttons.pause=v(p.selectors.buttons.pause),j.buttons.restart=v(p.selectors.buttons.restart),j.buttons.rewind=v(p.selectors.buttons.rewind),j.buttons.forward=v(p.selectors.buttons.forward),j.buttons.mute=v(p.selectors.buttons.mute),j.buttons.captions=v(p.selectors.buttons.captions),j.buttons.fullscreen=v(p.selectors.buttons.fullscreen),j.progress={},j.progress.bar=v(p.selectors.progress),j.progress.text=j.progress.bar.getElementsByTagName("span")[0],j.volume=v(p.selectors.buttons.volume),j.duration=v(p.selectors.duration),j.seekTime=b(p.selectors.seekTime)}function x(){if(j.media=j.container.querySelectorAll("audio, video")[0],!j.media)return console.error("No audio or video element found!"),!1;if(j.media.removeAttribute("controls"),j.type="video"==j.media.tagName.toLowerCase()?"video":"audio",s(j.container,p.classes[j.type],!0),s(j.container,p.classes.stopped,null===j.media.getAttribute("autoplay")),"video"===j.type){var e=document.createElement("div");e.setAttribute("class",p.classes.videoWrapper),r(j.media,e),j.videoContainer=e}}function h(){if("video"===j.type){j.videoContainer.insertAdjacentHTML("afterbegin","<div class='"+p.selectors.captions.replace(".","")+"'></div>"),j.captionsContainer=v(p.selectors.captions),j.isTextTracks=!1,j.media.textTracks&&(j.isTextTracks=!0);for(var e,t="",n=j.media.childNodes,r=0;r<n.length;r++)"track"===n[r].nodeName.toLowerCase()&&(e=n[r].getAttribute("kind"),"captions"===e&&(t=n[r].getAttribute("src")));if(j.captionExists=!0,""===t?(j.captionExists=!1,p.debug&&console.log("No caption track found.")):p.debug&&console.log("Caption track found; URI: "+t),j.captionExists){var i,a,l={};if("IE"===j.browserName&&10===j.browserMajorVersion||"IE"===j.browserName&&11===j.browserMajorVersion||"Firefox"===j.browserName&&j.browserMajorVersion>=31||"Safari"===j.browserName&&j.browserMajorVersion>=7)for(p.debug&&console.log("Detected IE 10/11 or Firefox 31+ or Safari 7+"),j.isTextTracks=!1,l={},i=j.media.textTracks,a=0;a<i.length;a++)l=j.media.textTracks[a],l.mode="hidden";if(j.isTextTracks)for(p.debug&&console.log("textTracks supported"),c(j),l={},i=j.media.textTracks,a=0;a<i.length;a++)l=j.media.textTracks[a],l.mode="hidden","captions"===l.kind&&o(l,"cuechange",function(){this.activeCues[0]&&this.activeCues[0].hasOwnProperty("text")&&(j.captionsContainer.innerHTML=this.activeCues[0].text)});else if(p.debug&&console.log("textTracks not supported so rendering captions manually"),c(j),j.currentCaption="",j.subcount=0,j.captions=[],o(j.media,"timeupdate",function(){j.media.currentTime.toFixed(1)>u(j.captions[j.subcount][0])&&j.media.currentTime.toFixed(1)<f(j.captions[j.subcount][0])&&(j.currentCaption=j.captions[j.subcount][1]),j.media.currentTime.toFixed(1)>f(j.captions[j.subcount][0])&&j.subcount<j.captions.length-1&&j.subcount++,j.captionsContainer.innerHTML=j.currentCaption}),""!==t){var d=new XMLHttpRequest;d.onreadystatechange=function(){if(4===d.readyState)if(200===d.status){j.captions=[];var e,t=[],n=d.responseText;t=n.split("\n\n");for(var r=0;r<t.length;r++)e=t[r],j.captions[r]=[],j.captions[r]=e.split("\n");j.captions.shift(),p.debug&&console.log("Successfully loaded the caption file via ajax.")}else p.debug&&console.error("There was a problem loading the caption file via ajax.")},d.open("get",t,!0),d.send()}"Safari"===j.browserName&&7===j.browserMajorVersion&&(p.debug&&console.log("Safari 7 detected; removing track from DOM"),i=j.media.getElementsByTagName("track"),j.media.removeChild(i[0]))}else s(j.container,p.classes.captions.enabled)}}function k(){j.seekTime[0].innerHTML=p.seekInterval,j.seekTime[1].innerHTML=p.seekInterval}function T(){"video"===j.type&&p.fullscreen.enabled&&(d.supportsFullScreen?(p.debug&&console.log("Fullscreen enabled"),s(j.container,p.classes.fullscreen.enabled,!0)):p.debug&&console.warn("Fullscreen not supported"))}function w(){j.media.play(),s(j.container,p.classes.stopped),s(j.container,p.classes.playing,!0)}function F(){j.media.pause(),s(j.container,p.classes.playing),s(j.container,p.classes.stopped,!0)}function S(){j.media.currentTime=0,j.isTextTracks||(j.subcount=0),w()}function I(e){"undefined"==typeof e&&(e=p.seekInterval);var t=j.media.currentTime-e;j.media.currentTime=0>t?0:t,j.isTextTracks||"video"!==j.type||a(j)}function N(e){"undefined"==typeof e&&(e=p.seekInterval);var t=j.media.currentTime+e;j.media.currentTime=t>j.media.duration?j.media.duration:t,j.isTextTracks||"video"!==j.type||a(j)}function M(){d.isFullScreen()?d.cancelFullScreen():d.requestFullScreen(j.container)}function C(e){"undefined"==typeof e&&(e=p.volume),e>10&&(e=10),j.volume.value=e,j.media.volume=parseFloat(e/10),A()}function E(e){"undefined"==typeof active&&(e=!j.media.muted,j.buttons.mute.checked=e),j.media.muted=e,A()}function L(e){"undefined"==typeof e&&(e=-1===j.container.className.indexOf(p.classes.captions.active),j.buttons.captions.checked=e),e?s(j.container,p.classes.captions.active,!0):s(j.container,p.classes.captions.active)}function A(){s(j.container,p.classes.muted,0===j.media.volume||j.media.muted)}function V(){o(j.buttons.fullscreen,"click",M),"video"===j.type&&p.click&&o(j.videoContainer,"click",function(){j.media.paused?w():j.media.ended?S():F()}),o(j.buttons.play,"click",function(){w(),j.buttons.pause.focus()}),o(j.buttons.pause,"click",function(){F(),j.buttons.play.focus()}),o(j.buttons.restart,"click",S),o(j.buttons.rewind,"click",function(){I(p.seekInterval)}),o(j.buttons.forward,"click",function(){N(p.seekInterval)}),o(j.volume,"change",function(){C(this.value)}),o(j.buttons.mute,"change",function(){E(this.checked)}),o(j.media,"timeupdate",function(){j.secs=parseInt(j.media.currentTime%60),j.mins=parseInt(j.media.currentTime/60%60),j.secs=("0"+j.secs).slice(-2),j.mins=("0"+j.mins).slice(-2),j.duration.innerHTML=j.mins+":"+j.secs}),o(j.media,"timeupdate",function(){j.percent=100/j.media.duration*j.media.currentTime,j.percent>0&&(j.progress.bar.value=j.percent,j.progress.text.innerHTML=j.percent)}),o(j.progress.bar,"click",function(e){j.pos=i(e).x/this.offsetWidth,j.media.currentTime=j.pos*j.media.duration,j.isTextTracks||"video"!==j.type||a(j)}),o(j.buttons.captions,"click",function(){L(this.checked)}),o(j.media,"ended",function(){"video"===j.type&&(j.captionsContainer.innerHTML=""),s(j.container,p.classes.stopped,!0),s(j.container,p.classes.playing)})}function O(){return d=l(),j.browserInfo=t(),j.browserName=j.browserInfo[0],j.browserMajorVersion=j.browserInfo[1],p.debug&&console.log(j.browserName+" "+j.browserMajorVersion),"IE"!==j.browserName||8!==j.browserMajorVersion&&9!==j.browserMajorVersion?(p.playAriaLabel="undefined"!=typeof p.title&&p.title.length?"Play "+p.title:"Play",x(),j.random=Math.floor(1e4*Math.random()),g(),y(),C(p.volume),T(),h(),k(),V(),void 0):(p.debug&&console.error("Browser not suppported."),!1)}var j=this;return j.container=e,O(),{media:j.media,play:w,pause:F,restart:S,rewind:I,forward:N,setVolume:C,toggleMute:E,toggleCaptions:L}}var d,p,f={enabled:!0,debug:!1,seekInterval:10,volume:5,click:!0,selectors:{container:".player",controls:".player-controls",buttons:{play:"[data-player='play']",pause:"[data-player='pause']",restart:"[data-player='restart']",rewind:"[data-player='rewind']",forward:"[data-player='fast-forward']",mute:"[data-player='mute']",volume:"[data-player='volume']",captions:"[data-player='captions']",fullscreen:"[data-player='fullscreen']"},progress:".player-progress",captions:".player-captions",duration:".player-duration",seekTime:".player-seek-time"},classes:{video:"player-video",videoWrapper:"player-video-wrapper",audio:"player-audio",stopped:"stopped",playing:"playing",muted:"muted",captions:{active:"captions-active",enabled:"captions-enabled"},fullscreen:{enabled:"fullscreen-enabled"}},captions:{defaultActive:!1},fullscreen:{enabled:!0}};e.setup=function(e){if(p=c(f,e),!p.enabled)return!1;for(var t=document.querySelectorAll(p.selectors.container),n=[],r=t.length-1;r>=0;r--){var s=t[r];"undefined"==typeof s.plyr&&(s.plyr=new u(s)),n.push(s.plyr)}return n}}(this.plyr=this.plyr||{});